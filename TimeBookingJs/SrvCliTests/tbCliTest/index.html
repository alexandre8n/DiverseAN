<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>JWT Demo Client</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
        font-family: system-ui, Arial, sans-serif;
        margin: 24px;
        line-height: 1.4;
      }

      .row {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        margin-bottom: 12px;
      }

      input,
      button {
        padding: 8px 12px;
        font-size: 14px;
      }

      button {
        cursor: pointer;
      }

      .btns {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      #log {
        width: 100%;
        height: 220px;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 6px;
        background: #fafafa;
        overflow: auto;
        white-space: pre-wrap;
      }

      label {
        display: inline-block;
        min-width: 90px;
      }
    </style>
  </head>

  <body>
    <h1>JWT Client Demo</h1>

    <div class="row">
      <label for="baseUrl">Base URL:</label>
      <input id="baseUrl" type="text" value="http://localhost:3000" size="40" />
    </div>

    <div class="row">
      <label for="username">Логин:</label>
      <input id="username" type="text" value="user1" />
      <label for="password">Пароль:</label>
      <input id="password" type="password" value="xxx" />
    </div>

    <div class="btns">
      <button id="loginBtn">Login</button>
      <button id="tbRecsBtn">GET /api/tbRecs</button>
      <button id="tbRecByIdBtn">GET /api/tbRecById</button>
      <button id="tbProjs">GET /api/tbGetProjects</button>
      <button id="tbAddProj">Post /api/tbAddProject</button>
      <button id="tbAddTbRec">Post /api/tbAddRec</button>
      <button id="tbUpdRec">Post /api/tbUpdateRec</button>
      <button id="tbDelRec">Post /api/tbDeleteRec</button>

      <button id="updateBtn">POST /api/something</button>
      <button id="logoutBtn">Logout</button>
    </div>
    <div class="adminCommands">
      <h2>Admin commands:</h2>
      <button id="usersListBtn">GET /api/tbAdmin_users</button>
      <button id="tbAddUser">Post /api/tbAdmin_addUser</button>
      <button id="tbDisableUser">Post /api/tbAdmin_changeUser</button>
    </div>
    <h3>Log</h3>
    <div id="log"></div>
    <script>
      let accessToken = "abc";
    </script>

    <!-- Твой клиентский код -->
    <script type="module" src="./main.js"></script>
    <!-- <script type="module" src="../tbShared/utl1.js"></script> -->

    <!-- Небольшой помощник для вывода лога (не обязателен).
       Если хочешь — в main.js можешь дергать window.appendLog(...) -->
    <script>
      const logEl = document.getElementById("log");
      window.appendLog = (msg) => {
        const time = new Date().toLocaleTimeString();
        logEl.textContent += `[${time}] ${
          typeof msg === "string" ? msg : JSON.stringify(msg, null, 2)
        }\n`;
        logEl.scrollTop = logEl.scrollHeight;
      };

      // Если хочешь, чтобы main.js мог прочитать baseURL/логин/пароль из DOM:
      window.getUiValues = () => ({
        baseURL: document.getElementById("baseUrl").value.trim(),
        username: document.getElementById("username").value.trim(),
        password: document.getElementById("password").value,
      });
    </script>
  </body>
</html>
